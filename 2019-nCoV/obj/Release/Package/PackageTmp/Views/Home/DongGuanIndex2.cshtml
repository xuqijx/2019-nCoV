
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>疫情防控防疫信息报备登记表(入住园区)</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="~/layui-v2.5.6/layui/css/layui.css" rel="stylesheet" media="all" />
    <link href="~/step/step-lay/step.css" rel="stylesheet" />
</head>
<body>
    <div class="layui-fluid">
        <div class="layui-card">
            <div class="layui-card-body" style="padding-top: 40px;">
                <div class="layui-carousel" id="stepForm" lay-filter="stepForm" style="margin: 0 auto;height: 600px;">
                    <div carousel-item>
                        <div>
                            <form class="layui-form" style="margin: 0 auto;max-width: 315px;padding-top: 40px;">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">工号</label>
                                    <div class="layui-input-block">
                                        <input type="text" id="userno" name="userno" lay-verify="required" lay-reqtext="请输入工号" placeholder="请输入工号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">姓名</label>
                                    <div class="layui-input-block">
                                        <input type="text" id="username" name="username" lay-verify="required" lay-reqtext="请输入姓名" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">性别</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="sex" value="男" title="男" checked="">
                                        <input type="radio" name="sex" value="女" title="女">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">出生年份</label>
                                    <div class="layui-input-inline">
                                        <input type="text" class="layui-input" id="test2" placeholder="yyyy" name="bornyear" lay-verify="required">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">手机</label>
                                    <div class="layui-input-inline">
                                        <input type="tel" id="phone" name="phone" lay-verify="required|phone" autocomplete="off" class="layui-input">
                                    </div>
                                    @*<div class="layui-inline">
                                            <label class="layui-form-label">部门</label>
                                            <div class="layui-input-inline">
                                                <input type="text" id="dept" name="dept" lay-verify="required" autocomplete="off" class="layui-input">
                                            </div>
                                        </div>*@
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">一级部门</label>
                                        <div class="layui-input-block">
                                            <select id="deptonelevel" name="deptonelevel" lay-filter="deptonelevel" lay-verify="required">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">二级部门</label>
                                        <div class="layui-input-block">
                                            <select id="depttwolevel" name="depttwolevel" lay-filter="depttwolevel">
                                            </select>
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">三级部门</label>
                                        <div class="layui-input-block">
                                            <select id="deptthreelevel" name="deptthreelevel" lay-filter="deptthreelevel">
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="layui-form-item" id="area-picker">
                                    <div class="layui-form-label">籍贯</div>
                                    <div class="layui-input-inline" style="width: 200px;">
                                        <select name="province" id="province" class="province-selector" data-value="" lay-filter="province-1">
                                            <option value="">请选择省</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline" style="width: 200px;">
                                        <select name="city" id="city" class="city-selector" data-value="" lay-filter="city-1">
                                            <option value="">请选择市</option>
                                        </select>
                                    </div>
                                    <div class="layui-input-inline" style="width: 200px;">
                                        <select name="county" id="county" class="county-selector" data-value="" lay-filter="county-1">
                                            <option value="">请选择区(镇)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit lay-filter="formStep">
                                            &emsp;下一步&emsp;
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div>
                            <form class="layui-form" style="margin: 0 auto;max-width: 460px;padding-top: 40px;">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">1.你住的宿舍房间号码是:</label>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="radio" name="q1" value="工业园" title="工业园">
                                        <input type="radio" name="q1" value="三和兴" title="三和兴">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" id="q1room" name="q1room" lay-verify="required" lay-reqtext="问题1请输入房间号" placeholder="请输入房间号" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">2.你今天的测试温度是:</label>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">上午</label>
                                        <div class="layui-input-block">
                                            <input type="text" id="q2mntemperature" name="q2mntemperature" lay-verify="required" lay-reqtext="问题2请输入上午温度" placeholder="请输入上午温度" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">下午</label>
                                        <div class="layui-input-block">
                                            <input type="text" id="q2antemperature" name="q2antemperature" lay-verify="required" lay-reqtext="问题2请输入下午温度" placeholder="请输入下午温度" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">3.你今天是否有以下症状:</label>
                                    <div class="layui-input-block">
                                        <input type="checkbox" name="q3symptom" value="发热(37.3度以上)" title="发热(37.3度以上)">
                                        <input type="checkbox" name="q3symptom" value="咳嗽" title="咳嗽">
                                        <input type="checkbox" name="q3symptom" value="喉咙疼痛" title="喉咙疼痛">
                                        <input type="checkbox" name="q3symptom" value="头痛" title="头痛">
                                        <input type="checkbox" name="q3symptom" value="流鼻涕" title="流鼻涕">
                                        <input type="checkbox" name="q3symptom" value="无症状" title="无症状">
                                        <input type="checkbox" name="q3symptom" value="其他" title="其他">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" name="q3othersymptom" placeholder="其他症状" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">4.今天是否和外面(公司外)的人员有直接接触<br>如有，在在后面注明:</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="q4" value="有" title="有">
                                        <input type="radio" name="q4" value="无" title="无">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-inline">
                                        <label class="layui-form-label">地点</label>
                                        <div class="layui-input-block">
                                            <input type="text" id="q4place" name="q4place" placeholder="请输入地点" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">时间</label>
                                        <div class="layui-input-block">
                                            <input type="text" id="q4time" name="q4time" placeholder="请输入时间" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                    <div class="layui-inline">
                                        <label class="layui-form-label">关系</label>
                                        <div class="layui-input-block">
                                            <input type="text" id="q4relationship" name="q4relationship" placeholder="请输入关系" autocomplete="off" class="layui-input">
                                        </div>
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">5.和你同宿舍的其他人员是否有以下症状<br>如有，请在备注栏注明名字:</label>
                                    <div class="layui-input-block">
                                        <input type="checkbox" name="q5symptom" value="发热(37.3度以上)" title="发热(37.3度以上)">
                                        <input type="checkbox" name="q5symptom" value="咳嗽" title="咳嗽">
                                        <input type="checkbox" name="q5symptom" value="喉咙疼痛" title="喉咙疼痛">
                                        <input type="checkbox" name="q5symptom" value="头痛" title="头痛">
                                        <input type="checkbox" name="q5symptom" value="流鼻涕" title="流鼻涕">
                                        <input type="checkbox" name="q5symptom" value="无症状" title="无症状">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" id="q5name" name="q5name" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">6.和你同宿舍的人员是否有以下区域的人员<br>如有，请在备注栏注明名字:</label>
                                    <div class="layui-input-block">
                                        <input type="checkbox" name="q6from" value="湖北" title="湖北">
                                        <input type="checkbox" name="q6from" value="浙江温州" title="浙江温州">
                                        <input type="checkbox" name="q6from" value="河南(信阳,南阳,驻马店)" title="河南(信阳,南阳,驻马店)">
                                        <input type="checkbox" name="q6from" value="湖南(岳阳,邵阳,娄底)" title="湖南(岳阳,邵阳,娄底)">
                                        <input type="checkbox" name="q6from" value="江西(南昌,九江,上饶)" title="江西(南昌,九江,上饶)">
                                        <input type="checkbox" name="q6from" value="安徽阜阳" title="安徽阜阳">
                                        <input type="checkbox" name="q6from" value="无" title="无">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" id="q6name" name="q6name" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">7.和你同宿舍的人员是否在春节期间有接触在<br>湖北武汉待过/从湖北武汉或温州经过<br>/接触疑似病症的人员<br>如有，请在备注栏注明名字:</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="q7" value="有" title="有">
                                        <input type="radio" name="q7" value="无" title="无">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" id="q7name" name="q7name" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">8.和你同宿舍的其他人员是否有<br>不按照公司的防疫防控措施执行的<br>如有，请在备注栏注明名字:</label>
                                    <div class="layui-input-block">
                                        <input type="radio" name="q8" value="有" title="有">
                                        <input type="radio" name="q8" value="无" title="无">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <input type="text" id="q8name" name="q8name" placeholder="请输入姓名" autocomplete="off" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">如果你还有其他问题或者好的建议，请大胆提出：</label>
                                    <div class="layui-input-block">
                                        <textarea placeholder="" class="layui-textarea" id="remark" name="remark"></textarea>
                                    </div>
                                </div>

                                <div class="layui-form-item">
                                    <div class="layui-input-block">
                                        <button class="layui-btn" lay-submit lay-filter="formStep">
                                            &emsp;下一步&emsp;
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div>
                            <div style="text-align: center;margin-top: 90px;">
                                <i class="layui-icon layui-circle"
                                   style="color: white;font-size:30px;font-weight:bold;background: #52C41A;padding: 20px;line-height: 80px;">&#xe605;</i>
                                <div style="font-size: 24px;color: #333;font-weight: 500;margin-top: 30px;">
                                    填写成功
                                </div>
                                <div style="font-size: 14px;color: #666;margin-top: 20px;">感谢！！</div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
            </div>
        </div>
    </div>


    <script src="~/layui-v2.5.6/layui/layui.js" charset="utf-8"></script>
    <script src="~/step/step-lay/step.js" charset="utf-8"></script>
    <script>
        //配置插件目录
        layui.config({
            base: '../mods/'
            , version: '3.0'
        },{
            base:'../step/step-lay/'
            , version: '1.0'
        });
        layui.use(['layer', 'form', 'layarea', 'step','laydate'], function () {
            var $ = layui.$
                , layer = layui.layer
                , form = layui.form
                , layarea = layui.layarea
                , step = layui.step
                , laydate = layui.laydate
                , stepcheck = false
                ,lastdate=[];
              laydate.render({
                  elem: '#test2' //指定元素
                  , type: 'year'
                  , value: '1990'
                  , isInitValue: false
              });
             //公告
              layer.open({
                type: 1
                ,title: false //不显示标题栏
                ,area: '300px;'
                ,shade: 0.8
                ,id: 'LAY_layuipro' //设定一个id，防止重复弹出
                ,moveType: 1 //拖拽模式，0或者1
                ,content: '<div style="padding: 25px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;"><H3 align="center">疫情防控防疫信息报备登记表</H3><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;防控疫情，人人有责!本着对自己负责、对公司负责、对社会负责，我们从2月11日开始，组织返岗的员工每天如实填写。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;请各员工积极配合公司完成申报防控工作，如实登记个人信息（包括身份信息、身体状况、出行情况及是否接触疫区人员等）。坚决做到不假报、不错报、不缓报、不瞒报、不漏报。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;面对抗击疫情的命令，公司董事会希望全体奥海返岗的携手行动起来，共同打赢这场疫情防控阻击战！！！<H3 align="center">携手战疫，期待春来，坚定信心，我们奥海一定能战胜一切困难。</H3></div>'
              });

            step.render({
                elem: '#stepForm',
                filter: 'stepForm',
                width: '100%', //设置容器宽度
                stepWidth: '294px',
                height: '1800px',
                stepItems: [{
                    title: '基本信息'
                }, {
                    title: '健康状况'
                }, {
                    title: '完成'
                }]
            });

            layarea.render({
                elem: '#area-picker',
                change: function (res) {
                    //选择结果
                    //console.log(res);
                }
            });


            var lastdate = [];
            form.on('submit(formStep)', function (data) {
                if (!stepcheck) {
                     if (data.field.sex == undefined) {
                        layer.alert('请选择性别', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (data.field.deptonelevel == '') {
                        layer.alert('请选择一级部门', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (data.field.province == ''||data.field.city == ''||data.field.county == '') {
                        layer.alert('请选择籍贯', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    lastdate = data.field;
                    stepcheck = true;
                }
                else {
                    if (data.field.q1 == undefined) {
                        layer.alert('请选择问题1', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    var arr1 = new Array();
                    $("input:checkbox[name='q3symptom']:checked").each(function(i){
                        arr1[i] = $(this).val();
                    });
                    if (arr1.length <= 0) {
                        layer.alert('问题3至少选择一个选项', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (arr1.toString().indexOf("其他") >= 0 && data.field.q3othersymptom == '') {
                        layer.alert('问题3选择其他需要输入症状说明', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }

                    if (data.field.q4 == undefined) {
                        layer.alert('请选择问题4', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (data.field.q4 != undefined&&data.field.q4 =='有') {
                        if (data.field.q4place == '') {
                              layer.alert('问题4需填写地点', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                              })
                              return false;
                        }
                        if (data.field.q4time == '') {
                              layer.alert('问题4需填写时间', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                              })
                              return false;
                        }
                        if (data.field.q4relationship == '') {
                              layer.alert('问题4需填写关系', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                              })
                              return false;
                        }
                    }
                    var arr2 = new Array();
                    $("input:checkbox[name='q5symptom']:checked").each(function(i){
                        arr2[i] = $(this).val();
                    });
                    if (arr2.length <= 0) {
                        layer.alert('问题5至少选择一个选项', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (arr2.toString().indexOf("发热") >= 0 || arr2.toString().indexOf("咳嗽") >= 0 || arr2.toString().indexOf("喉咙疼痛") >= 0|| arr2.toString().indexOf("头痛") >= 0|| arr2.toString().indexOf("流鼻涕") >= 0) {
                        if (data.field.q5name == '') {
                              layer.alert('问题5同宿舍人员有症状请输入姓名', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                            })
                            return false;
                        }
                    }
                    var arr3 = new Array();
                    $("input:checkbox[name='q6from']:checked").each(function(i){
                        arr3[i] = $(this).val();
                    });
                    if (arr3.length <= 0) {
                        layer.alert('问题6至少选择一个选项', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (arr3.toString().indexOf("湖北") >= 0 || arr3.toString().indexOf("浙江温州") >= 0 || arr3.toString().indexOf("河南(信阳,南阳,驻马店)") >= 0|| arr3.toString().indexOf("湖南(岳阳,邵阳,娄底)") >= 0|| arr3.toString().indexOf("江西(南昌,九江,上饶)") >= 0|| arr3.toString().indexOf("安徽阜阳") >= 0) {
                        if (data.field.q6name == '') {
                              layer.alert('问题6同宿舍人员是湖北/浙江温州/河南(信阳,南阳,驻马店)/湖南(岳阳,邵阳,娄底)/江西(南昌,九江,上饶)/安徽阜阳请输入姓名', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                            })
                            return false;
                        }
                    }
                    if (data.field.q7 == undefined) {
                        layer.alert('请选择问题7', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (data.field.q7 != undefined&&data.field.q7 =='有') {
                        if (data.field.q7name == '') {
                              layer.alert('问题7需填写姓名', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                              })
                              return false;
                        }
                    }
                    if (data.field.q8 == undefined) {
                        layer.alert('请选择问题8', {
                          icon: 2,
                          skin: 'layer-ext-moon'
                        })
                        return false;
                    }
                    if (data.field.q8 != undefined&&data.field.q8 =='有') {
                        if (data.field.q8name == '') {
                              layer.alert('问题8需填写姓名', {
                                  icon: 2,
                                  skin: 'layer-ext-moon'
                              })
                              return false;
                        }
                    }
                    lastdate.q1 = data.field.q1;
                    lastdate.q1room = data.field.q1room;
                    lastdate.q2mntemperature = data.field.q2mntemperature;
                    lastdate.q2antemperature = data.field.q2antemperature;
                    lastdate.q3symptom = arr1.toString();
                    lastdate.q3othersymptom= data.field.q3othersymptom;
                    lastdate.q4 = data.field.q4;
                    lastdate.q4place = data.field.q4place;
                    lastdate.q4time = data.field.q4time;
                    lastdate.q4relationship = data.field.q4relationship;
                    lastdate.q5symptom = arr2.toString();
                    lastdate.q5name= data.field.q5name;
                    lastdate.q6from = arr3.toString();
                    lastdate.q6name = data.field.q6name;
                    lastdate.q7 = data.field.q7;
                    lastdate.q7name = data.field.q7name;
                    lastdate.q8 = data.field.q7;
                    lastdate.q8name = data.field.q7name;
                    lastdate.remark = data.field.remark;
                    //lastdate.push(data.field);
                    $.ajax({
                        type: "GET",
                        url: "@Url.Action("AddZoom","Home")",
                        data: {'username':lastdate.username,'userno':lastdate.userno,'sex':lastdate.sex,'bornyear':lastdate.bornyear,'phone':lastdate.phone,'dept':lastdate.dept,'province':lastdate.province,'city':lastdate.city,'county':lastdate.county,'q1':lastdate.q1,'q1room':lastdate.q1room,'q2mntemperature':lastdate.q2mntemperature,'q2antemperature':lastdate.q2antemperature,'q3symptom':lastdate.q3symptom,'q3othersymptom':lastdate.q3othersymptom,'q4':lastdate.q4,'q4place':lastdate.q4place,'q4time':lastdate.q4time,'q4relationship':lastdate.q4relationship,'q5symptom':lastdate.q5symptom,'q5name':lastdate.q5name,'q6from':lastdate.q6from,'q6name':lastdate.q6name,'q7':lastdate.q7,'q7name':lastdate.q7name,'q8':lastdate.q8,'q8name':lastdate.q8name,'remark':lastdate.remark,'deptonelevel':lastdate.deptonelevel,'depttwolevel':lastdate.depttwolevel,'deptthreelevel':lastdate.deptthreelevel},
                        dataType: "json"
                    });
                    layer.alert('提交成功!', {
                            icon: 1,
                            skin: 'layer-ext-moon'
                    })
                }

                step.next('#stepForm');
                $('html,body').animate({scrollTop: '0px'}, 800);
                return false;
            });
                $.ajax({
                   url: "@Url.Action("DeptQueryOne","Home")",
                   type: "post",
                   dataType : "json",
                   async: false,
                    success: function (result) {
                        var jsonresult = $.parseJSON(result);
                        var strs = '';
                       for(var x in jsonresult){
                          strs += '<option value = "' + jsonresult[x].onelevel + '">' + jsonresult[x].onelevel + '</option>'
                       } 
                        $("#deptonelevel").html(strs);
                        form.render('select');//最后记得渲染
                       }
                 });
                 form.on('select(deptonelevel)', function(data){ //no是那个lay-filter的值
                                    var deptonelevel=$("#deptonelevel").val();//获得选中的option的值
                                            $.ajax({
                                            url: "@Url.Action("DeptQueryTwo","Home")",//带参数将这个传到后台条件查询方法里面
                                            type: "post",
                                            data: {"onelevel":deptonelevel},
                                            dataType : "json",
                                            async: false,//同步
                                            success: function (result) {
                                                var jsonresult = $.parseJSON(result);
                                                 var str = '';
                                                for(var x in jsonresult){
                                                str += '<option value = "' + jsonresult[x].twolevel + '">' + jsonresult[x].twolevel + '</option>'
                                                } 
                                                $("#depttwolevel").html(str);
                                                }
                                            });
                                            form.render('select');//最后记得渲染
                                        });
                   form.on('select(depttwolevel)', function(data){ //no是那个lay-filter的值
                                    var depttwolevel=$("#depttwolevel").val();//获得选中的option的值
                                            $.ajax({
                                            url: "@Url.Action("DeptQueryThree","Home")",//带参数将这个传到后台条件查询方法里面
                                            type: "post",
                                            data: {"twolevel":depttwolevel},
                                            dataType : "json",
                                            async: false,//同步
                                            success: function (result) {
                                                var jsonresult = $.parseJSON(result);
                                                 var str = '';
                                                for(var x in jsonresult){
                                                str += '<option value = "' + jsonresult[x].threelevel + '">' + jsonresult[x].threelevel + '</option>'
                                                } 
                                                $("#deptthreelevel").html(str);
                                                }
                                            });
                                            form.render('select');//最后记得渲染
                                        });


            $(function(){
               //输入框的值改变时触发
              $("#userno").on("input",function(e){
                //获取input输入的值
                  var usernovalue = e.delegateTarget.value;
                  //console.log(usernovalue);
                  $.ajax({
                        type:'get',
                        url:'@Url.Action("ZoomQuery","Home")',
                        cache:false,
                        dataType: 'json',
                        data: { 'userno': usernovalue },
                        success:function(data){
                            $("#username").val(data.username);
                            $("#test2").val(data.bornyear);
                            //$("#phone").val(data.phone);
                            $("#deptonelevel").val(data.deptonelevel);
                                                                var deptonelevel=$("#deptonelevel").val();//获得选中的option的值
                                            $.ajax({
                                            url: "@Url.Action("DeptQueryTwo","Home")",//带参数将这个传到后台条件查询方法里面
                                            type: "post",
                                            data: {"onelevel":deptonelevel},
                                            dataType : "json",
                                            async: false,//同步
                                            success: function (result) {
                                                var jsonresult = $.parseJSON(result);
                                                 var str = '';
                                                for(var x in jsonresult){
                                                str += '<option value = "' + jsonresult[x].twolevel + '">' + jsonresult[x].twolevel + '</option>'
                                                } 
                                                $("#depttwolevel").html(str);
                                                }
                                            });
                                                        form.render('select');//最后记得渲染
                                                        $("#depttwolevel").val(data.depttwolevel);

                            var depttwolevel=$("#depttwolevel").val();//获得选中的option的值
                                            $.ajax({
                                            url: "@Url.Action("DeptQueryThree","Home")",//带参数将这个传到后台条件查询方法里面
                                            type: "post",
                                            data: {"twolevel":depttwolevel},
                                            dataType : "json",
                                            async: false,//同步
                                            success: function (result) {
                                                var jsonresult = $.parseJSON(result);
                                                 var str = '';
                                                for(var x in jsonresult){
                                                str += '<option value = "' + jsonresult[x].threelevel + '">' + jsonresult[x].threelevel + '</option>'
                                                } 
                                                $("#deptthreelevel").html(str);
                                                }
                                            });
                            form.render('select');//最后记得渲染
                                                        $("#deptthreelevel").val(data.deptthreelevel);
                            $("input[name=sex][value='男']").attr("checked", data.sex == '男' ? true : false);
                            $("input[name=sex][value='女']").attr("checked", data.sex == '女' ? true : false);
                            $("select[name=province]").val(data.province);
                            $("select[name=city]").val(data.city);
                            $("select[name=county]").val(data.county);
                            layarea.render({
                                elem: '#area-picker',
                                 data: {
                                     province: data.province,
                                     city: data.city,
                                     county: data.county,
                                 },
                                change: function (res) {
                                    //选择结果
                                    console.log(res);
                                }
                            });
                            form.render();
                        }
                    });
              });
            });


        });
    </script>

</body>
</html>